feature ospf
feature bgp
feature nv overlay
feature vn-segment-vlan-based
nv overlay evpn
feature pim
!
hostname spine
router bgp 65000
  router-id 192.168.0.6
  address-family ipv4 unicast
  address-family l2vpn evpn
    retain route-target all
!
#for loop to configure bgp neighbor for each leaf
  neighbor 192.168.0.8
    remote-as 65000
    update-source Loopback0
    address-family ipv4 unicast
     send-community both
     route-reflector-client
    address-family l2vpn evpn
      send-community both
      route-reflector-client
!
  neighbor 192.168.0.10
    remote-as 65000
    update-source Loopback0
    address-family ipv4 unicast
     send-community both
     route-reflector-client
    address-family l2vpn evpn
      send-community both
      route-reflector-client
!
  neighbor 192.168.0.11
    remote-as 65000
    update-source Loopback0
    address-family ipv4 unicast
     send-community both
     route-reflector-client
    address-family l2vpn evpn
      send-community both
      route-reflector-client
!
interface loopback 1
  ip address 192.168.0.100/32
  ip pim sparse-mode
  ip router ospf 1 area 0.0.0.0
ip pim rp-address 192.168.0.100
ip pim anycast-rp 192.168.0.100 192.168.0.6
ip pim anycast-rp 192.168.0.100 192.168.0.7
!
#for loop to enable pim on link to each leaf
